<!DOCTYPE html>
<html>
<head>
	<!-- Scripts -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
	<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAs6KKpgjX0_KWXFebMVZGkl_fL2nZ7YzA">
	</script>
	<script src='../public/scripts/data.js'></script>
	<script src='../public/scripts/map_generator.js'></script>
	
	

	<!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Rubik' rel='stylesheet' type='text/css'>
    
    <!-- Stylin -->
	<link href='../public/stylesheets/map_style.css' rel='stylesheet' type='text/css'>
	<link href='../public/stylesheets/header_style.css' rel='stylesheet' type='text/css'>
</head>

<body>
	<div id="header">
        <div id="prev">
            <a href="#" id="prev_text" onClick='showMenu()'>menu</a>
            </div>
        <div id="next">
            <a href="admin_page.html" id="next_text">admin</a>
            </div>
        <!-- <div id="page_title"></div> -->
        <div id="logo">JELLYWATCH</div>
    </div>
	
	<div id='mapContainer'>
		<div id="googleMap"></div>
		<img id=bubble src='../public/img/RecordSighting.svg' onClick='recordSighting()'/>
	</div>
	
	<div id='menu' style='display: none'>
		<div>
			<p><a href='#' onClick='logOut()'>Log Out</a></p>
			<p><a href='https://www.facebook.com/RIjellywatch'>RI Jellywatch on Facebook</a></p>
			<p><a href='#' onClick='closeMenu()'>Back to Map</a></p>
		</div>
	</div>
	<script>
	if (Data.isLoggedIn()) {
		document.getElementById('next_text').style.display = (Data.user && Data.user.is_admin) ? 'block' : 'none';
	} else {
		location.href = 'login.html'
	}

	function showMenu() {
		$("#menu").show();
	}

	function closeMenu() {
		$("#menu").hide();
	}

	function logOut() {
		Data.logOut()
		location.href = 'login.html';
	}

	function recordSighting() {
		location.href = 'form_page.html#' + MapPos.lat + ',' + MapPos.lng;
	}
	google.maps.event.addDomListener(window, 'load', initMap);
	</script>
</body>
</html>
